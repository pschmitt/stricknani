{% extends "base.html" %}

{% block content %}
{% block form_styles %}{% endblock %}
{% block form_before %}{% endblock %}
<div class="{% block form_container_class %}max-w-7xl{% endblock %} mx-auto px-2 md:px-6 lg:px-8 py-4 md:py-8 space-y-6">
    <!-- Header -->
    <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-4">
        <div class="flex-1 min-w-0">
            <div class="flex items-center gap-3">
                {% block form_nav %}{% endblock %}
                <h1 class="text-3xl md:text-4xl font-extrabold text-base-content tracking-tight truncate">
                    {% block form_title %}{% endblock %}
                </h1>
            </div>
        </div>
        <div class="flex flex-wrap items-center gap-3 shrink-0">
            {% block form_actions %}{% endblock %}
        </div>
    </div>

    <!-- Form Content -->
    {% block form_body %}{% endblock %}
</div>
{% block page_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.querySelector('main form');
        if (!form) return;

        let isDirty = false;
        
        // Track changes
        form.addEventListener('input', () => isDirty = true);
        form.addEventListener('change', () => isDirty = true);
        
        // Allow submission without warning
        form.addEventListener('submit', () => isDirty = false);
        
        // Warn before leaving
        window.addEventListener('beforeunload', (e) => {
            if (isDirty) {
                e.preventDefault();
                e.returnValue = ''; // Required for Chrome/modern browsers
            }
        });
    });
</script>
{% block page_scripts_extra %}{% endblock %}
{% endblock %}
{% endblock %}
