{% set action = 'delete' if is_favorite else 'post' %}
{% set icon = 'mdi-heart' if is_favorite else 'mdi-heart-outline' %}
{% set label = _('Remove from favorites') if is_favorite else _('Add to favorites') %}
{% set message = _('Removed from favorites') if is_favorite else _('Added to favorites') %}
{% if variant == 'card' %}
    {% set button_classes = 'inline-flex h-10 w-10 items-center justify-center rounded-full border text-xl transition focus:outline-none focus:ring-2 focus:ring-pink-400 focus:ring-offset-2 dark:focus:ring-offset-slate-900' %}
    {% if is_favorite %}
        {% set button_classes = button_classes ~ ' border-pink-400 bg-pink-100 text-pink-600 hover:bg-pink-200 dark:border-pink-500 dark:bg-pink-500/25 dark:text-pink-200 dark:hover:bg-pink-500/35' %}
    {% else %}
        {% set button_classes = button_classes ~ ' border-slate-200 bg-white/70 text-slate-500 hover:border-pink-300 hover:text-pink-500 dark:border-slate-600 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:border-pink-400 dark:hover:text-pink-300' %}
    {% endif %}
{% else %}
    {% set button_classes = 'inline-flex h-11 w-11 items-center justify-center rounded-full border text-2xl transition focus:outline-none focus:ring-2 focus:ring-pink-400 focus:ring-offset-2 dark:focus:ring-offset-slate-900' %}
    {% if is_favorite %}
        {% set button_classes = button_classes ~ ' border-pink-400 bg-pink-100 text-pink-600 hover:bg-pink-200 dark:border-pink-500 dark:bg-pink-500/25 dark:text-pink-200 dark:hover:bg-pink-500/35' %}
    {% else %}
        {% set button_classes = button_classes ~ ' border-slate-200 bg-white/70 text-slate-500 hover:border-pink-300 hover:text-pink-500 dark:border-slate-600 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:border-pink-400 dark:hover:text-pink-300' %}
    {% endif %}
{% endif %}
<button
    type="button"
    hx-{{ action }}="/projects/{{ project_id }}/favorite?variant={{ variant }}"
    {% if variant == 'card' %}
    hx-target="this"
    hx-swap="outerHTML"
    {% else %}
    hx-target="closest [data-favorite-toggle]"
    hx-swap="innerHTML"
    {% endif %}
    hx-on::after-request="if (event.detail.successful) { showToast('{{ message }}', '{{ 'info' if is_favorite else 'success' }}'); }"
    class="{{ button_classes }}"
    aria-pressed="{{ 'true' if is_favorite else 'false' }}"
    aria-label="{{ label }}"
    title="{{ label }}"
>
    <span class="mdi {{ icon }}" aria-hidden="true"></span>
    <span class="sr-only">{{ label }}</span>
</button>
