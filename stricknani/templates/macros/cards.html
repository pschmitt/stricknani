{% macro list_card(data_attrs='') %}
<div class="card bg-base-100 shadow-sm border border-base-200 hover:shadow-xl hover:border-primary/20 transition-all duration-300 group overflow-hidden rounded-2xl" {{ data_attrs | safe }}>
    <div class="relative overflow-hidden">
        {{ caller('media') }}
    </div>
    <div class="card-body p-4 sm:p-5">
        {{ caller('body') }}
    </div>
</div>
{% endmacro %}

{% macro preview_card(href, title, subtitle=None, image_url=None, image_alt=None, icon='mdi-image-off') %}
<a href="{{ href }}" class="group flex items-center gap-3 rounded-lg border border-base-300 bg-base-100 p-2 shadow-sm transition hover:border-primary hover:shadow-md">
    <div class="relative h-14 w-14 shrink-0 overflow-hidden rounded-md bg-base-200">
        {% if image_url %}
        <img src="{{ image_url }}" alt="{{ image_alt or title }}" class="h-full w-full object-cover">
        {% else %}
        <div class="flex h-full w-full items-center justify-center text-base-content/50">
            <span class="mdi {{ icon }} text-xl" aria-hidden="true"></span>
        </div>
        {% endif %}
    </div>
    <div class="min-w-0">
        <div class="font-semibold line-clamp-1">{{ title }}</div>
        {% if subtitle %}
        <div class="text-xs text-base-content/60 line-clamp-1">{{ subtitle }}</div>
        {% endif %}
    </div>
</a>
{% endmacro %}

{% macro yarn_pill(yarn) %}
<a href="/yarn/{{ yarn.id }}" class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-base-content transition hover:bg-blue-100 hover:text-blue-700 dark:bg-slate-800 dark:hover:bg-slate-700">
    <span class="mdi mdi-needle text-sm"></span>
    <span>{{ yarn.name }}</span>
    {% if yarn.colorway %}<span class="text-base-content/70">· {{ yarn.colorway }}</span>{% endif %}
</a>
{% endmacro %}

{% macro project_pill(project) %}
<a href="/projects/{{ project.id }}" class="inline-flex items-center gap-2 rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-900 transition hover:bg-blue-100 hover:text-blue-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700">
    <span class="mdi mdi-ribbon text-sm"></span>
    <span>{{ project.name }}</span>
    {% if project.category %}
    <span class="text-base-content/70">· {{ _(project.category) }}</span>
    {% endif %}
</a>
{% endmacro %}

{% macro yarn_preview_card(yarn) %}
{{ preview_card(
    href='/yarn/' + yarn.id|string,
    title=yarn.name,
    subtitle=yarn.colorway or yarn.brand,
    image_url=yarn.preview_url,
    image_alt=yarn.preview_alt or yarn.name,
    icon='mdi-sheep'
) }}
{% endmacro %}

{% macro project_preview_card(project) %}
{{ preview_card(
    href='/projects/' + project.id|string,
    title=project.name,
    subtitle=_(project.category) if project.category else None,
    image_url=project.preview_url,
    image_alt=project.preview_alt or project.name,
    icon='mdi-folder-multiple-outline'
) }}
{% endmacro %}
